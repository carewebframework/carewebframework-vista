<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:cwf="http://www.carewebframework.org/schema/spring"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/aop
		http://www.springframework.org/schema/aop/spring-aop.xsd
		http://www.carewebframework.org/schema/spring
		http://www.carewebframework.org/schema/spring/spring-extensions.xsd">

	<beans profile="root">
		<!-- Service for reading and writing persisted properties. -->
		<bean id="propertyService" class="org.carewebframework.vista.api.property.PropertyService"
			cwf:override="always">
			<constructor-arg ref="brokerSession" />
		</bean>

		<!-- RPC broker -->
		<bean id="brokerSession" class="org.carewebframework.vista.api.mbroker.BrokerSessionEx"
			init-method="connect" destroy-method="disconnect">
			<property name="connectionParams" ref="brokerConnectionParams" />
			<property name="executorService" ref="taskExecutor" />
		</bean>

		<!-- RPC broker connection parameters -->
		<bean id="brokerConnectionParams" class="org.carewebframework.vista.mbroker.ConnectionParams">
			<property name="server" value="${broker.server}" />
			<property name="port" value="${broker.port}" />
			<property name="namespace" value="${broker.namespace:}" />
			<property name="timeout" value="${broker.timeout:30000}" />
			<property name="username" value="${broker.username:}" />
			<property name="password" value="${broker.password:}" />
			<property name="appid" value="${broker.appid:RGCWF CAREWEB FRAMEWORK}" />
		</bean>
		
		<!-- Register additional cipher tables. -->
		<bean class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
		 	<property name="staticMethod" value="org.carewebframework.vista.mbroker.Security.registerCipher" />
		 	<property name="arguments">
		 		<array>
					<value><![CDATA[VEB_0|=f3Y}m<5i$`W>znGA7P:O%H69[2r)jKh@uo\wMb*Da !+T?q4-JI#d;8ypUQ]g"~'&Cc.LNt/kX,e{vl1FRZs(xS]]></value>
					<value><![CDATA[D/Jg><p]1W6Rtqr.QYo8TBEMK-aAIyO(xG7lPz;=d)N}2F!U ,e0~$fk"j[m*3s5@XnZShv+`b'{u&_\9%|wL4ic:V?H#C]]></value>
					<value><![CDATA[?lBUvZq\fwk+u#:50`SOF9,dp&*G-M=;{8Ai6/N7]bQ1szC!(PxW_YV~)3Lm.EIXD2aT|hKj$rnR@["c g'<>t%4oJHy}e]]></value>
					<value><![CDATA[MH,t9K%TwA17-Bzy+XJU?<>4mo @=6:Ipfnx/Y}R8Q\aN~{)VjEW;|Sq]rl[0uLFd`g5Z#e!3$b"P_.si&G(2'Cvkc*ODh]]></value>
					<value><![CDATA[vMy>"X?bSLCl)'jhzHJk.fVc6#*[0OuP@\{,&r(`Es:K!7wi$5F; DoY=p%e<t}4TQA2_W9adR]gNBG1~nIZ+3x-Um|8q/]]></value>
					<value><![CDATA[:"XczmHx;oA%+vR$Mtr CBTU_w<uEK5f,SW*d8OaFGh]j'{7-~Qp#yqP>09si|VY1J!/[lN23&L4`=.D6)ZIb\n?}(ek@g]]></value>
					<value><![CDATA[j7Qh[YU.u6~xm<`vfe%_g-MRF(#iK=trl}C)>GEDN *$OdHzBA98aLJ|2WP:@ko0wy4I/S&,q']5!13XcVs\?Zp"+{;Tbn]]></value>
					<value><![CDATA[\UVZ;.&]%7fGq`*SA=Kv/-Xr1OBHiwhP5ukYo{2"}d |NsT,>!x6y~cz[C)pe8m9LaRI(MEFlt:Qg#D'n$W04b@_+?j<3J]]></value>
					<value><![CDATA[MgSvV"U'dj5Yf6K*W)/:z$oi7GJ|t(1Ak=ZC,@]Q0?8DnbE[+L`{mq>;aOR}wcB4sF_e9rh2l\x<. PyNpu%IT!&3#HX~-]]></value>
					<value><![CDATA[rFkn4Z0cH7)`6Xq|yL #wmuW?Gf!2YES;.B_D=el}hN[M&x(*AasU9otd+{]g>TQjp<:v%5O"zI\@$Rb~8i-3/'V1,CJPK]]></value>
					<value><![CDATA[\'%u+W)mK41L#:A6!;7("tnyRlaOe09]3EFd ITf.`@P[Q{B$_iYhZo*kbc|HUgz=D>Svr8x,X~-<NsjM}C/&J?p2wV5qG]]></value>
					<value><![CDATA[QCl_329e+DTp&\?jNys V]k*M"X!$Y6[i@g>{RvF'01(45LJZU,:-uAwtB;7|%fx.n`IhSE<OoW~=bdP#/KHzrc)8mG}aq]]></value>
					<value><![CDATA[!{w*PR[B9Oli~T, rFc"/?ast8=)-_Dgo<E#n4HYA%f'N;0@S7pJ`kGIedM|+C2yjvL5b3K6\Z]V(.h}umxz>XQ$qUW:1&]]></value>
					<value><![CDATA[}:SHZ|O~A-bcyJ4%'5vM+ ;eo.$B)Vp\,kTDz1sGL`]*=mg2nxYPd&lErN3[8qF0@u"a_>wQKI{f6C7?9RX(t#i/U<j!Wh]]></value>
					<value><![CDATA[,ry*|7<1keO:Wi C/zh4IZ>x!F[_("Dbu%Hl5Pg=]QG.LKcJ0&ont@+{;ATX6jMwBv?2#f`q\}VYm'8Es$NpU)dR~S9a3-]]></value>
					<value><![CDATA[h,=/:pJ$@mlY-`bwQ)e3Xt8.RUSMV 2A;j[PN}TE9x~kL&<ns5q>_#c1%K+rIuFoa(zyDWdH]?\GB0g*4f6"Z!'v{7|OiC]]></value>
					<value><![CDATA[/$*b.ts0vOx_-o"l3MHI~}!E`eJimPd>Sn&wzFUh?Kf4)g5X<,8pD:9LA{a[k;'|GyYQ=R2B\#q+cru6N1W@(C TV]7Z%j]]></value>
					<value><![CDATA[qEoC?YWNtV{Brg,I(i:e7Jd#6m!D8XT"n[$~1*ZcxL.Kh2s4%Q&ju\5Gvazw+9pF@k`HA)=U3/< -}'0b;|PfSRl_MO]y>]]></value>
					<value><![CDATA[`@X:!R[\tY5OBcZPh$rM_a-"vgJG%|}oIH)wWQ*jDVxlp,'+S zu(&7?>KCn4y1dE02q6b<;F=8]9NAmT{Li3f/esUk.~#]]></value>
					<value><![CDATA[\Zr';/SMsG76Lj$aBc[#k>u=_O@2J&X{Aft xV4~vz8Q}q)0K.NIpRnYwDhg+<"H-!(PF:m*]?,WCT|dE9o53%`liUey1b]]></value>
		 		</array>
		 	</property>
		</bean>
		 		
		<!-- Domain factories  -->
		<bean class="org.carewebframework.vista.api.JsonDomainFactory" />

	</beans>

	<beans profile="desktop">

		<!-- globalEventDispatcher: Mediates communications between the local and 
			the global event manager. -->
		<bean id="globalEventDispatcher" init-method="init"
			destroy-method="destroy" cwf:override="always"
			class="org.carewebframework.vista.api.event.GlobalEventDispatcher">
			<property name="brokerSession" ref="brokerSession" />
			<property name="localEventDispatcher" ref="eventManager" />
		</bean>

	</beans>
</beans>
